<div data-ng-switch="editorMode" class="richtext-input">
	<div data-ng-switch-when="Markdown" class="richtext-input-markdown tabbable">
		<ul data-ng-show="useTabs" class="nav nav-tabs" style="margin-bottom: 0">
			<li class="active">
				<a href="javascript:;" data-role="editor" data-target="#rbsInputMarkdown(=editorId=)TabEditor" data-toggle="tab">
					{{ i18n('m.rbs.admin.admin.editor', ['ucf']) }}
				</a>
			</li>
			<li>
				<a href="javascript:;" data-role="preview" data-target="#rbsInputMarkdown(=editorId=)TabPreview" data-toggle="tab">
					{{ i18n('m.rbs.admin.admin.preview', ['ucf']) }}
					<span data-ng-if="previewing"><i class="icon-spinner icon-spin"></i></span>
				</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="rbsInputMarkdown(=editorId=)TabEditor">
				<div class="btn-toolbar btn-toolbar-richtext" data-ng-if="! readOnly">
					<div class="pull-right">
						<button type="button" class="btn btn-sm btn-info btn-icon"
							title="{{ i18nAttr('m.rbs.admin.admin.markdown_help', ['ucf']) }}" data-ng-click="openHelp()">
							<i class="icon-info-sign"></i>
						</button>
						<button data-ng-if="!useTabs" type="button" class="btn btn-default btn-sm btn-icon"
							data-ng-click="preview()" title="{{ i18nAttr('m.rbs.admin.admin.preview', ['ucf']) }}">
							<i class="icon-eye-open"></i>
						</button>
						<div data-ng-if="draggable" draggable="true" class="btn btn-default btn-sm btn-icon block-handle"
							title="{{ i18nAttr('m.rbs.admin.admin.drag_block', ['ucf']) }}">
							<i class="icon-move"></i>
						</div>
					</div>

					<div class="btn-group">
						<button type="button" data-ng-disabled="useTextarea" class="btn btn-default btn-sm dropdown-toggle"
							data-toggle="dropdown">{{ i18n('m.rbs.admin.admin.richtext_title', ['ucf']) }} <span class="caret"></span>
						</button>
						<ul class="dropdown-menu" data-role="menu">
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(0)">
									{{ i18n('m.rbs.admin.admin.heading_level_0', ['ucf']) }}
								</a>
							</li>
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(1)">
									{{ i18n('m.rbs.admin.admin.heading_level_1', ['ucf']) }}
								</a>
							</li>
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(2)">
									{{ i18n('m.rbs.admin.admin.heading_level_2', ['ucf']) }}
								</a>
							</li>
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(3)">
									{{ i18n('m.rbs.admin.admin.heading_level_3', ['ucf']) }}
								</a>
							</li>
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(4)">
									{{ i18n('m.rbs.admin.admin.heading_level_4', ['ucf']) }}
								</a>
							</li>
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(5)">
									{{ i18n('m.rbs.admin.admin.heading_level_5', ['ucf']) }}
								</a>
							</li>
							<li>
								<a tabindex="-1" href="javascript:;" data-ng-click="mdHeading(6)">
									{{ i18n('m.rbs.admin.admin.heading_level_6', ['ucf']) }}
								</a>
							</li>
						</ul>
					</div>
					<div class="btn-group">
						<button type="button" data-ng-disabled="useTextarea" title="{{ i18nAttr('m.rbs.admin.admin.bold', ['ucf']) }}"
							class="btn btn-default btn-sm btn-icon" data-ng-click="mdBold()"><i class="icon-bold"></i></button>
						<button type="button" data-ng-disabled="useTextarea"
							title="{{ i18nAttr('m.rbs.admin.admin.italic', ['ucf']) }}" class="btn btn-default btn-sm btn-icon"
							data-ng-click="mdItalic()"><i class="icon-italic"></i></button>
					</div>

					<div class="btn-group">
						<button type="button" data-ng-disabled="useTextarea" title="{{ i18nAttr('m.rbs.admin.admin.undo', ['ucf']) }}"
							class="btn btn-default btn-sm btn-icon" data-ng-click="mdUndo()"><i class="icon-undo"></i></button>
						<button type="button" data-ng-disabled="useTextarea" title="{{ i18nAttr('m.rbs.admin.admin.redo', ['ucf']) }}"
							class="btn btn-default btn-sm btn-icon" data-ng-click="mdRedo()"><i class="icon-repeat"></i></button>
					</div>

					<div class="btn-group" data-ng-if="availableSelectors.media">
						<button type="button" data-ng-disabled="useTextarea"
							title="{{ i18nAttr('m.rbs.admin.admin.insert_picture', ['ucf']) }}"
							class="btn btn-default btn-sm btn-icon"
							data-ng-click="beginSelectSession('Rbs_Media_Image')"><i class="icon-picture"></i></button>
					</div>

					<div class="btn-group" data-ng-if="availableSelectors.links">
						<button type="button" title="{{ i18nAttr('m.rbs.admin.admin.insert_internal_link', ['ucf']) }}"
							data-ng-disabled="useTextarea" class="btn btn-default btn-sm btn-icon"
							data-ng-click="beginSelectSession('Rbs_Website_StaticPage')">
							<i class="icon-link"></i>
						</button>
						<button type="button" title="{{ i18nAttr('m.rbs.admin.admin.insert_external_link', ['ucf']) }}"
							data-ng-disabled="useTextarea" class="btn btn-default btn-sm btn-icon"
							data-ng-click="insertExternalLink()"><i class="icon-external-link"></i></button>
					</div>

					<div class="btn-group" data-ng-if="availableSelectors.users">
						<button type="button" data-ng-disabled="useTextarea" class="btn btn-default btn-sm btn-icon"
							title="{{ i18nAttr('m.rbs.admin.admin.insert_user', ['ucf']) }}"
							data-ng-click="beginSelectSession('Rbs_User_User')">
							<i class="icon-user"></i>
						</button>
					</div>

					<div class="btn-group" data-ng-if="availableSelectors.usergroups">
						<button type="button" data-ng-disabled="useTextarea" class="btn btn-default btn-sm btn-icon"
							title="{{ i18nAttr('m.rbs.admin.admin.insert_usergroup', ['ucf']) }}"
							data-ng-click="beginSelectSession('Rbs_User_Group')">
							<i class="icon-group"></i>
						</button>
					</div>

					<div class="btn-group" data-ng-if="availableSelectors.substitutionVariables">
						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
							{{ i18n('m.rbs.mail.documents.mail_substitutions', ['ucf']) }} <span class="caret"></span>
						</button>
						<ul class="dropdown-menu pull-right">
							<li data-ng-repeat="(variable, label) in substitutionVariables">
								<a href="" data-ng-click="insertSubstitutionVariable(variable)">
									(= label =) <small data-ng-show="label != variable">{(= variable =)}</small>
								</a>
							</li>
						</ul>
					</div>
				</div>

				<div class="substitution-variables"></div>

				<div class="ace-editor-container">
					<div data-role="rbs-ace-editor"></div>
				</div>
			</div>
			<div class="tab-pane preview-container" data-role="preview-container" id="rbsInputMarkdown(=editorId=)TabPreview">
				<div class="preview-toolbar pull-right" data-ng-if="!useTabs">
					<button type="button" class="btn btn-default btn-sm btn-icon active"
						data-ng-click="closePreview()"><i class="icon-eye-open"></i></button>
				</div>
				<div class="preview-content"></div>
			</div>
		</div>
	</div>

	<div class="richtext-input-wysiwyg" data-ng-switch-when="Html">
		<rbs-wysiwyg-editor data-ng-if="draggable" name="wysiwygContent" ng-model="wysiwyg.content" draggable="true">
		</rbs-wysiwyg-editor>
		<rbs-wysiwyg-editor data-ng-if="!draggable" name="wysiwygContent" ng-model="wysiwyg.content"></rbs-wysiwyg-editor>
	</div>

	<div data-ng-switch-when="Choose" class="richtext-input-chooser">
		<div data-ng-show="!showChooseDetails">
			<h4>
				{{ i18n('m.rbs.admin.admin.choose_input_method', ['ucf']) }}
			</h4>
			<div class="btn-toolbar">
				<button class="btn btn-primary btn-sm" type="button" data-ng-click="chooseEditorMode('Html')">
					{{ i18n('m.rbs.admin.admin.input_method_wysiwyg_button', ['ucf']) }}
				</button>
				<button class="btn btn-primary btn-sm" type="button" data-ng-click="chooseEditorMode('Markdown')">
					{{ i18n('m.rbs.admin.admin.input_method_markdown_button', ['ucf']) }}
				</button>

				<div class="pull-right">
					<button class="btn btn-info btn-sm" type="button" data-ng-click="showChooseDetails = true">
						<i class="icon-question-sign"></i>
						{{ i18n('m.rbs.admin.admin.input_method_show_descriptions', ['ucf']) }}
					</button>
				</div>
			</div>
		</div>
		<div data-ng-show="showChooseDetails">
			<h4>
				{{ i18n('m.rbs.admin.admin.choose_input_method', ['ucf']) }}
			</h4>
			<div class="row" data-ng-show="showChooseDetails">
				<div class="col-md-6">
					<div class="thumbnail text-center">
						<img src="/Assets/Rbs/Admin/img/wysiwyg.png"/>
						<div class="caption">
							<h3>{{ i18n('m.rbs.admin.admin.input_method_wysiwyg_title', ['ucf']) }}</h3>
							<p>
								{{ i18n('m.rbs.admin.admin.input_method_wysiwyg_description', ['ucf'], { OPEN_TAG: '<em>', CLOSE_TAG: '</em>'}) | raw }}
							</p>
							<p>
								<button class="btn btn-primary btn-sm" type="button" data-ng-click="chooseEditorMode('Html')">
									{{ i18n('m.rbs.admin.admin.input_method_wysiwyg_button', ['ucf']) }}
								</button>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-6">
					<div class="thumbnail text-center">
						<img src="/Assets/Rbs/Admin/img/markdown.png"/>
						<div class="caption">
							<h3>{{ i18n('m.rbs.admin.admin.input_method_markdown_title', ['ucf']) }}</h3>
							<p>
								{{ i18n('m.rbs.admin.admin.input_method_markdown_description', ['ucf'], { OPEN_TAG: '<em><a href="http://daringfireball.net/projects/markdown/syntax" target="_blank">', CLOSE_TAG: '</a></em>'}) | raw }}
							</p>
							<p>
								<button class="btn btn-primary btn-sm" type="button" data-ng-click="chooseEditorMode('Markdown')">
									{{ i18n('m.rbs.admin.admin.input_method_markdown_button', ['ucf']) }}
								</button>
							</p>
						</div>
					</div>
				</div>
			</div>
		</div>

		<p><small><strong class="text-danger">
			<i class="icon-warning-sign"></i> {{ i18n('m.rbs.admin.admin.input_method_warning', ['ucf']) }}
		</strong></small></p>
	</div>
</div>
