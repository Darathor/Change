<form name="form" ng-submit="submit()" class="form-horizontal">
	<fieldset data-ng-show="section==''"
		data-form-section-label="{{ i18nAttr('m.rbs.admin.general-properties', ['ucf']) }}"
		data-form-section-group="{{ i18nAttr('m.rbs.admin.properties', ['ucf']) }}">

		<rbs-field-text
			property="label" required="true"
			label="{{ i18nAttr('m.rbs.catalog.document.product.label', ['ucf']) }}"
			input-class="input-block-level">
		</rbs-field-text>

		<rbs-field-text
			property="title" required="true"
			rbs-sync-value="document.label" sync-title="{{ i18nAttr('m.rbs.catalog.document.product.synchronize-title-label', ['ucf']) }}"
			label="{{ i18nAttr('m.rbs.catalog.document.product.title', ['ucf']) }}"
			input-class="input-block-level">
		</rbs-field-text>

		<rbs-field-boolean
			ng-cloak="" ng-hide="document.id > 0"
			property="newSkuOnCreation"
			label="{{ i18nAttr('m.rbs.catalog.document.product.newskuoncreation', ['ucf']) }}">
		</rbs-field-boolean>

		<rbs-field-picker property="sku" label="{{ i18nAttr('m.rbs.catalog.document.product.sku', ['ucf']) }}"
			accepted-model="Rbs_Stock_Sku"
			selector-title="{{ i18nAttr('m.rbs.catalog.document.product.sku-picker-title', ['ucf']) }}"
			allow-creation="true"
			allow-edition="true"
			ng-hide="document.newSkuOnCreation && document.id <= 0">
		</rbs-field-picker>

		<rbs-field-picker-multiple property="visuals" label="{{ i18nAttr('m.rbs.catalog.document.product.visuals', ['ucf']) }}"
			accepted-model="Rbs_Media_Image"
			selector-title="{{ i18nAttr('m.rbs.catalog.document.product.visuals-picker-title', ['ucf']) }}"
			allow-creation="true" picker="model">
		</rbs-field-picker-multiple>

		<rbs-field-picker-multiple property="pictograms" label="{{ i18nAttr('m.rbs.catalog.document.product.pictograms', ['ucf']) }}"
			accepted-model="Rbs_Media_Image"
			selector-title="{{ i18nAttr('m.rbs.catalog.document.product.pictograms-picker-title', ['ucf']) }}"
			allow-creation="true">
		</rbs-field-picker-multiple>

	</fieldset>

	<fieldset data-ng-show="section=='attributes'"
			data-form-section-label="{{ i18nAttr('m.rbs.catalog.document.product.section-attributes', ['ucf']) }}"
			data-form-section-group="{{ i18nAttr('m.rbs.admin.properties', ['ucf']) }}">

		<rbs-field label="{{ i18nAttr('m.rbs.catalog.document.product.attribute', ['ucf']) }}">
			<select ng-model="document.attribute" rbs-items-from-collection="Rbs_Catalog_Collection_AttributeSet">
				<option value="">{{ i18n('m.rbs.admin.forms.picker-choose', ['ucf']) }}</option>
			</select>
		</rbs-field>

		<div data-ng-repeat="attributeDef in attributesDef">
			<div ng-if="attributeDef.attributes">
				<h4>(= attributeDef.label =)</h4>
				<div data-ng-repeat="attributeItemDef in attributeDef.attributes">

					<rbs-field label="(= attributeItemDef.label =)" data-ng-class="{'required': attributeItemDef.required}" property="attr_(= attributeItemDef.id =)">
						<div ng-if="attributeItemDef.collectionCode">
							<select ng-model="attributeItemDef.value.value" rbs-items-from-collection="(= attributeItemDef.collectionCode =)">
								<option value=""></option>
							</select>
						</div>
						<div ng-if="!attributeItemDef.collectionCode">
							<div data-ng-switch="attributeItemDef.type">
								<input type="text" data-ng-switch-when="Code" class="input-block-level" ng-required="attributeItemDef.required" id="(= attributeItemDef.id =)" ng-model="attributeItemDef.value.value" />
								<switch data-ng-switch-when="Boolean" ng-model="attributeItemDef.value.value" id="(= attributeItemDef.id =)"></switch>
								<date-selector data-ng-switch-when="DateTime" ng-required="attributeItemDef.required" ng-model="attributeItemDef.value.value" id="(= attributeItemDef.id =)" ></date-selector>
								<input type="number" data-ng-switch-when="Integer" class="input-mini" ng-required="attributeItemDef.required" id="(= attributeItemDef.id =)" ng-model="attributeItemDef.value.value" />
								<input type="text" data-ng-switch-when="Float" smart-float="" class="input-block-level" ng-required="attributeItemDef.required" id="(= attributeItemDef.id =)" ng-model="attributeItemDef.value.value" />
								<div class="document-picker-single" data-ng-switch-when="Document"
										ng-model="attributeItemDef.value.value" ng-required="attributeItemDef.required"
										property-label="" selector-title="" accepted-model="(= attributeItemDef.documentType =)"
										allow-edition="false" allow-creation="false" picker="model">
								</div>
								<div class="document-picker-multiple" data-ng-switch-when="DocumentArray"
										ng-model="attributeItemDef.value.value" ng-required="attributeItemDef.required"
										property-label="" selector-title="" accepted-model="(= attributeItemDef.documentType =)"
										allow-edition="false" allow-creation="false" picker="model">
								</div>
								<rbs-rich-text-input data-ng-switch-when="Text" ng-required="attributeItemDef.required" id="(= attributeItemDef.id =)" ng-model="attributeItemDef.value.value" profile="Website"></rbs-rich-text-input>
							</div>
						</div>
					</rbs-field>
				</div>
			</div>

			<div ng-if="!attributeDef.attributes">
				<rbs-field label="(= attributeDef.label =)" data-ng-class="{'required': attributeDef.required}" property="attr_(= attributeDef.id =)">
					<div ng-if="attributeDef.collectionCode">
						<select ng-model="attributeDef.value.value" rbs-items-from-collection="(= attributeDef.collectionCode =)">
							<option value=""></option>
						</select>
					</div>
					<div ng-if="!attributeDef.collectionCode">
						<div data-ng-switch="attributeDef.type">
							<input type="text" data-ng-switch-when="Code" class="input-block-level" ng-required="attributeDef.required" id="(= attributeDef.id =)" ng-model="attributeDef.value.value" />
							<switch data-ng-switch-when="Boolean" ng-model="attributeDef.value.value" id="(= attributeDef.id =)"></switch>
							<date-selector data-ng-switch-when="DateTime" ng-required="attributeDef.required" ng-model="attributeDef.value.value" id="(= attributeDef.id =)" ></date-selector>
							<input type="number" data-ng-switch-when="Integer" class="input-mini" ng-required="attributeDef.required" id="(= attributeDef.id =)" ng-model="attributeDef.value.value" />
							<input type="text" data-ng-switch-when="Float" smart-float="" class="input-block-level" ng-required="attributeDef.required" id="(= attributeDef.id =)" ng-model="attributeDef.value.value" />
							<div class="document-picker-single" data-ng-switch-when="Document"
									ng-model="attributeDef.value.value" ng-required="attributeDef.required"
									property-label="" selector-title="" accepted-model="(= attributeDef.documentType =)"
									allow-edition="false" allow-creation="false" picker="model">
							</div>
							<div class="document-picker-multiple" data-ng-switch-when="DocumentArray"
									ng-model="attributeDef.value.value" ng-required="attributeDef.required"
									property-label="" selector-title="" accepted-model="(= attributeDef.documentType =)"
									allow-edition="false" allow-creation="false" picker="model">
							</div>
							<rbs-rich-text-input data-ng-switch-when="Text" ng-required="attributeDef.required" id="(= attributeDef.id =)" ng-model="attributeDef.value.value" profile="Website"></rbs-rich-text-input>
						</div>
					</div>
				</rbs-field>
			</div>
		</div>

	</fieldset>

	<fieldset data-ng-show="section=='publication'"
		data-form-section-label="{{ i18nAttr('m.rbs.admin.publication-properties', ['ucf']) }}"
		data-form-section-group="{{ i18nAttr('m.rbs.admin.properties', ['ucf']) }}">

		<rbs-field-date
			property="startPublication"
			label="{{ i18nAttr('m.rbs.catalog.document.product.startPublication', ['ucf']) }}">
		</rbs-field-date>

		<rbs-field-date
			property="endPublication"
			label="{{ i18nAttr('m.rbs.catalog.document.product.endPublication', ['ucf']) }}">
		</rbs-field-date>
	</fieldset>

	<fieldset data-ng-show="section=='declination'" hide-when-create="true"
			data-form-section-label="{{ i18nAttr('m.rbs.catalog.document.product.section-declination', ['ucf']) }}"
			data-form-section-group="{{ i18nAttr('m.rbs.admin.information', ['ucf']) }}">

		<div class="control-group property" data-ng-hide="document.declinationGroup">
			Le produit ne fait pas partie d'un produit d�clin�.
		</div>

		<div class="control-group property" data-ng-show="document.declinationGroup">
			<label class="control-label">{{ i18n('m.rbs.catalog.document.product.declinationgroup', ['ucf']) }}</label>
			<div class="controls">
				<a href ng-href="(= document.declinationGroup | documentURL =)">(= document.declinationGroup.label =)</a>
			</div>
		</div>
	</fieldset>

	<fieldset data-ng-show="section=='categorization'"
		data-form-section-label="{{ i18nAttr('m.rbs.catalog.document.productcategorization', ['ucf']) }}"
		data-form-section-group="{{ i18nAttr('m.rbs.admin.information', ['ucf']) }}">

		<rbs-field-boolean property="categorizable"
				label="{{ i18nAttr('m.rbs.catalog.document.product.categorizable', ['ucf']) }}">
		</rbs-field-boolean>

		<table data-ng-show="categorizations.length > 0" class="table table-striped">
			<thead>
			<tr>
				<th>
					{{ i18n('m.rbs.catalog.document.productcategorization.listing', ['ucf']) }}
				</th>
				<th>
					{{ i18n('m.rbs.catalog.document.listing.highlight', ['ucf']) }}
				</th>
				<th>
					{{ i18n('m.rbs.catalog.document.productcategorization.canonical', ['ucf']) }}
				</th>
				<th>
				</th>
			</tr>
			</thead>
			<tbody>
				<tr data-ng-repeat="cat in categorizations">
					<td>
						<a class="btn-link" ng-click="cascadeEditCategorization(cat)">(= cat.listing.label =)</a>
					</td>
					<td>
						<switch ng-model="cat.isHighlighted" ng-change="toggleHighlight(cat)"></switch>
					</td>
					<td>(= cat.canonical|rbsBoolean =)</td>
					<td style="width:160px; text-align: right">
						<button style="width:36px" class="btn" ng-click="cascadeEditCategorization(cat)" type="button">
							<i class="icon-pencil"></i>
						</button>
						<button style="width:36px" class="btn btn-danger" type="button" ng-click="deleteCategorization(cat)">
							<i class="icon-remove"></i>
						</button>
					</td>
				</tr>
			</tbody>
		</table>

		<a href data-ng-show="document.categorizable"
				data-ng-click="cascadeCreateCategorization()"><i class="icon-plus-sign"></i> {{ i18n('m.rbs.catalog.admin.js.add-product-in-listing', ['ucf']) }}</a>

	</fieldset>

	<fieldset data-ng-show="section=='systeminfo'"
		data-form-section-label="{{ i18nAttr('m.rbs.admin.admin.js.status', ['ucf']) }}"
		data-form-section-group="{{ i18nAttr('m.rbs.admin.information', ['ucf']) }}"
		data-document-system-info-section>
	</fieldset>

	<form-button-bar></form-button-bar>
</form>