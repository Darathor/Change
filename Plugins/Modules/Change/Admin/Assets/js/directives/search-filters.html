<form class="form-inline search-filters well well-small hide" data-ng-submit="applyFilters()">

	<header>
		<button type="button" class="close" data-ng-click="cancelFiltersAndClose()" title="Annuler tous les filtres">×</button>
		<h4 title="Afficher/masquer les filtres"><i class="icon-search"></i> <span>Rechercher des éléments</span></h4>
	</header>

	<div class="content">
		<div>
			<label>Conditions requises :</label>
			<div class="btn-group" data-toggle="buttons-radio">
				<button title="Effectue un ET binaire" type="button" class="btn btn-small" data-ng-class="{active: operator=='and'}" data-ng-click="operator='and'">Toutes</button>
				<button title="Effectue un OU binaire" type="button" class="btn btn-small" data-ng-class="{active: operator=='or'}" data-ng-click="operator='or'">Au moins une</button>
			</div>
		</div>

		<div class="filters">

			<div class="filter" data-ng-repeat="applied in appliedFilters">
				<button class="btn rounded-icon" type="button" data-ng-click="removeFilter($index)" title="Supprimer ce filtre"><i class="icon-minus"></i></button>
				<select data-ng-model="applied.filter" data-ng-options="f.label for (name,f) in availableFilters"></select>

				<div data-ng-switch="applied.filter.type" style="display:inline-block">

					<!-- String -->

					<div data-ng-switch-when="String" style="display:inline-block">

						<select data-ng-hide="applied.filter.possibleValues" data-ng-model="applied.op" class="input-medium">
							<option value="contains">contient</option>
							<option value="beginsWith">commence par</option>
							<option value="eq">égale</option>
							<option value="endsWith">se termine par</option>
						</select>
						<input data-ng-hide="applied.filter.possibleValues" type="text" data-role="filter-value" class="inline input-medium" data-ng-model="applied.value"/>

						<select data-ng-show="applied.filter.possibleValues" data-ng-model="applied.op" class="input-medium">
							<option value="eq">est</option>
							<option value="neq">n'est pas</option>
						</select>
						<select data-ng-show="applied.filter.possibleValues" data-ng-model="applied.value" data-role="filter-value" data-ng-options="o.label for o in applied.filter.possibleValues"></select>

					</div>

					<!-- Integer -->

					<div data-ng-switch-when="Integer" style="display:inline-block">

						<select data-ng-hide="applied.filter.possibleValues" data-ng-model="applied.op">
							<option value="eq">égale</option>
							<option value="gte">est supérieur(e) ou égal(e) à</option>
							<option value="lte">est inférieur(e) ou égal(e) à</option>
							<option value="neq">est différent</option>
						</select>
						<input data-ng-hide="applied.filter.possibleValues" type="number" data-role="filter-value" class="inline input-mini" data-ng-model="applied.value"/>

						<select data-ng-show="applied.filter.possibleValues" data-ng-model="applied.op" class="input-medium">
							<option value="eq">est</option>
							<option value="neq">n'est pas</option>
						</select>
						<select data-ng-show="applied.filter.possibleValues" data-ng-model="applied.value" data-role="filter-value" data-ng-options="o.label for o in applied.filter.possibleValues"></select>

					</div>

					<!-- DateTime -->

					<div data-ng-switch-when="DateTime" style="display:inline-block">
						<select data-ng-model="applied.op" class="input-medium">
							<option value="lte">est antérieure à</option>
							<option value="eq">est le</option>
							<option value="gte">est postérieure à</option>
						</select>
						<date-selector data-ng-model="applied.value" data-role="filter-value" style="display:inline-block"/>
					</div>

					<!-- Boolean -->

					<div data-ng-switch-when="Boolean" style="display:inline-block">
						<switch data-role="filter-value" data-ng-model="applied.value"/>
					</div>

					<!-- Document -->

					<div data-ng-switch-when="Document" ng-switch="applied.filter.selectorType" style="display:inline-block">
						<model-select
								ng-switch-when="dropdown"
								ng-model="applied.value"
								change-model="(=applied.filter.documentType=)"></model-select>
						<input
								ng-switch-default=""
								data-ng-model="applied.value"
								type="number" data-role="filter-value" class="inline input-mini"/>
					</div>

				</div>
			</div>

		</div>

		<footer>
			<div class="btn-toolbar">
				<button type="button" class="btn btn-small" data-ng-click="addFilter()"><i class="icon-plus"></i> Ajouter un filtre</button>
			</div>

			<!--div>
				<label class="radio">
					<input type="radio" value="all" ng-model="treePolicy" />
					Tous
				</label>
				<label class="radio">
					<input type="radio" value="childOf" ng-model="treePolicy" />
					Enfants directs
				</label>
				<label class="radio">
					<input type="radio" value="descendantOf" ng-model="treePolicy" />
					Descendants
				</label>
			</div-->

			<div class="btn-toolbar">
				<button type="submit" class="btn btn-primary" data-ng-disabled="isUnchanged()" data-ng-class="{pulse: !isUnchanged()}"><i class="icon-filter icon-white"></i> Filtrer</button>
				<button type="button" class="btn" data-ng-click="addToFavorites($event)" data-ng-disabled="! isUnchanged()">Ajouter aux recherches favorites</button>
			</div>
		</footer>
	</div>

</form>