{% import "@Admin/forms.twig" as forms %}

<form name="form" data-ng-submit="submit()" class="form-horizontal" novalidate>
	<fieldset data-ng-show="section==''"
		data-form-section-label="{{ i18nAttr('m.change.admin.general-properties', ['ucf']) }}"
		data-form-section-group="{{ i18nAttr('m.change.admin.properties', ['ucf']) }}">
		{{ forms.price('basePrice', 'm.change.catalog.document.price.baseprice', true) }}
		<!-- TODO list -->
		{{ forms.field('taxCategory', 'String', 'm.change.catalog.document.price.taxcategory', true) }}
		{{ forms.price('ecoTax', 'm.change.catalog.document.price.ecotax', true) }}

		<hr/>
		<span class="help-block">
			Pour appliquer une <label class="in-text" for="discount">promotion</label> sur le montant indiqué ci-dessus, saisissez la valeur de la promotion ainsi que le type de promotion&nbsp;: pourcentage, prix barré ou valeur à déduire.
		</span>

		<div class="control-group">
			<label class="control-label" for="discount">Promotion</label>

			<div class="controls">
				<div class="input-append">
					<input class="input-mini number" name="discount" id="discount" size="16" type="text"
						data-ng-model="document.discount"/>

					<div class="btn-group" data-toggle="buttons-radio">
						<button class="btn" type="button" data-ng-click="setDiscount('percent')" title="Pourcentage">%</button>
						<button class="btn" type="button" data-ng-click="setDiscount('fixedprice')" title="Prix barré">€</button>
						<button class="btn" type="button" data-ng-click="setDiscount('reduction')" title="Valeur à déduire">
							<i class="icon-minus"></i>
						</button>
					</div>
				</div>
			</div>
		</div>
		{{ forms.field('discountDetail', 'String', 'm.change.catalog.document.price.discountdetail', true) }}
		{{ forms.price('finalPrice', 'm.change.catalog.document.price.finalprice', true, true) }}

		<div class="alert" data-ng-show="document.finalPrice <= 0">
			Le prix final n'est pas correct !
		</div>
		<div class="alert" data-ng-show="document.finalPrice > document.basePrice">
			Hum... Le prix ne semble pas être si promotionnel que ça !
		</div>

		<hr/>
		<span class="help-block">
			Vous pouvez indiquer une <strong>période de validité</strong> pour ce prix.<br />
			<span class="label label-important">Important</span> Si vous définissez un prix promotionnel, il est recommandé
			d'indiquer une <label class="in-text" for="endDate">date de fin</label>.
		</span>

		<div class="control-group property">
			<label class="control-label" for="beginDate">{{ i18n('m.change.catalog.document.product.startpublication', ['ucf']) }}
			</label>

			<div class="controls">
				<date-selector data-ng-model="document.startPublication" name="startPublication"></date-selector>
				<div class="btn-toolbar">
					<div class="btn-group">
						<button type="button" class="btn btn-small">maintenant</button>
						<button type="button" class="btn btn-small">demain</button>
						<button type="button" class="btn btn-small">lundi</button>
						<button type="button" class="btn btn-small">le mois prochain</button>
					</div>
				</div>
			</div>
		</div>

		<div class="control-group property">
			<label class="control-label" for="beginDate">{{ i18n('m.change.catalog.document.product.endpublication', ['ucf']) }}
			</label>

			<div class="controls">
				<date-selector data-ng-model="document.endPublication" name="endPublication"></date-selector>
				<div class="btn-toolbar">
					<div class="btn-group">
						<button type="button" class="btn btn-small">+7 jours</button>
						<button type="button" class="btn btn-small">+2 semaines</button>
						<button type="button" class="btn btn-small">+1 mois</button>
					</div>
					<div class="btn-group">
						<button type="button" class="btn btn-small">demain</button>
						<button type="button" class="btn btn-small">fin de la semaine</button>
						<button type="button" class="btn btn-small">fin du mois</button>
					</div>
				</div>
			</div>
		</div>

		<hr/>
		<span class="help-block">
			Vous pouvez définir une <label class="in-text" for="minQuantity">quantité minimale</label> d'achat pour que ce prix
			soit appliqué.
		</span>

		{{ forms.field('thresholdMin', 'Integer', 'm.change.catalog.document.price.thresholdmin', true) }}
	</fieldset>

	<fieldset
		data-ng-show="section=='systeminfo'"
		data-form-section-label="{{ i18nAttr('m.change.admin.admin.js.status', ['ucf']) }}"
		data-form-section-group="{{ i18nAttr('m.change.admin.information', ['ucf']) }}"
		data-document-system-info-section>
	</fieldset>

	<form-button-bar></form-button-bar>
</form>